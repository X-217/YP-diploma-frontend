!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=106)}([function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(54))},function(t,e,n){var r=n(0),i=n(28),o=n(2),s=n(32),a=n(33),c=n(59),u=i("wks"),l=r.Symbol,h=c?l:l&&l.withoutSetter||s;t.exports=function(t){return o(u,t)||(a&&o(l,t)?u[t]=l[t]:u[t]=h("Symbol."+t)),u[t]}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(5);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(3);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e,n){var r=n(6),i=n(9),o=n(22);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(6),i=n(30),o=n(4),s=n(31),a=Object.defineProperty;e.f=r?a:function(t,e,n){if(o(t),e=s(e,!0),o(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(65),i=n(0),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(0),i=n(7),o=n(2),s=n(18),a=n(20),c=n(23),u=c.get,l=c.enforce,h=String(String).split("String");(t.exports=function(t,e,n,a){var c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),l(n).source=h.join("string"==typeof e?e:"")),t!==r?(c?!d&&t[e]&&(u=!0):delete t[e],u?t[e]=n:i(t,e,n)):u?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},function(t,e,n){var r=n(25),i=n(26);t.exports=function(t){return r(i(t))}},function(t,e){t.exports={}},function(t,e,n){var r=n(11);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(27),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){t.exports=!1},function(t,e,n){var r=n(0),i=n(7);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(6),i=n(62),o=n(22),s=n(13),a=n(31),c=n(2),u=n(30),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=s(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(c(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){var r=n(29),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(0),i=n(5),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r,i,o,s=n(63),a=n(0),c=n(5),u=n(7),l=n(2),h=n(35),d=n(24),f=a.WeakMap;if(s){var p=new f,v=p.get,m=p.has,_=p.set;r=function(t,e){return _.call(p,t,e),e},i=function(t){return v.call(p,t)||{}},o=function(t){return m.call(p,t)}}else{var g=h("state");d[g]=!0,r=function(t,e){return u(t,g,e),e},i=function(t){return l(t,g)?t[g]:{}},o=function(t){return l(t,g)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e){t.exports={}},function(t,e,n){var r=n(3),i=n(8),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(17),i=n(29);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(0),i=n(18),o=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,n){var r=n(6),i=n(3),o=n(21);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(5);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(3);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r=n(0),i=n(19).f,o=n(7),s=n(12),a=n(18),c=n(51),u=n(37);t.exports=function(t,e){var n,l,h,d,f,p=t.target,v=t.global,m=t.stat;if(n=v?r:m?r[p]||a(p,{}):(r[p]||{}).prototype)for(l in e){if(d=e[l],h=t.noTargetGet?(f=i(n,l))&&f.value:n[l],!u(v?l:p+(m?".":"#")+l,t.forced)&&void 0!==h){if(typeof d==typeof h)continue;c(d,h)}(t.sham||h&&h.sham)&&o(d,"sham",!0),s(n,l,d,t)}}},function(t,e,n){var r=n(28),i=n(32),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r=n(3),i=/#|\.prototype\./,o=function(t,e){var n=a[s(t)];return n==u||n!=c&&("function"==typeof e?r(e):!!e)},s=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},function(t,e,n){var r=n(9).f,i=n(2),o=n(1)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r,i,o,s=n(0),a=n(3),c=n(8),u=n(15),l=n(53),h=n(21),d=n(40),f=s.location,p=s.setImmediate,v=s.clearImmediate,m=s.process,_=s.MessageChannel,g=s.Dispatch,y=0,S={},b=function(t){if(S.hasOwnProperty(t)){var e=S[t];delete S[t],e()}},x=function(t){return function(){b(t)}},w=function(t){b(t.data)},L=function(t){s.postMessage(t+"",f.protocol+"//"+f.host)};p&&v||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return S[++y]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(y),y},v=function(t){delete S[t]},"process"==c(m)?r=function(t){m.nextTick(x(t))}:g&&g.now?r=function(t){g.now(x(t))}:_&&!d?(o=(i=new _).port2,i.port1.onmessage=w,r=u(o.postMessage,o,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||a(L)||"file:"===f.protocol?r="onreadystatechange"in h("script")?function(t){l.appendChild(h("script")).onreadystatechange=function(){l.removeChild(this),b(t)}}:function(t){setTimeout(x(t),0)}:(r=L,s.addEventListener("message",w,!1))),t.exports={set:p,clear:v}},function(t,e,n){var r=n(41);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,n){var r=n(10);t.exports=r("navigator","userAgent")||""},function(t,e,n){"use strict";var r=n(11),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(t){this.mainApi=t,this.date="",this.title="",this.text="",this.source="",this.image="",this.url="",this.keyword="",this.id="",this.cardContainer="",this.cardTemplate=""}createSearchCard(t,e){this.date=t.date,this.title=t.title,this.text=t.text,this.source=t.source,this.image=t.image,this.url=t.url,this.keyword=t.keyword,this.id=t.id,this.cardContainer=e,this.cardTemplate=`\n        <div class="card added${this.id}">\n          <div class="card__figure" style="background-image: url(${this.image})">\n            <div class="card__offer-text">Войдите, чтобы сохранять статьи</div>\n            <button class="card__action card__action_save"></button>\n          </div>\n          <div class="card__container">\n            <div class="card__date">${this.date}</div>\n            <h3 class="card__title">${this.title}</h3>\n            <div class="card__text">${this.text}</div>\n            <div class="card__source">${this.source}</div>\n          </div>\n        </div>`,this.cardContainer.insertAdjacentHTML("beforeend",this.cardTemplate);const n="."+this.cardContainer.lastChild.classList[1],r=document.querySelector(n),i=r.querySelector(".card__action");r.addEventListener("click",this._openArticle.bind(r,this.url)),i.addEventListener("click",this._toggleSaved.bind(this,i,this.keyword,this.title,this.text,this.date,this.source,this.url,this.image))}createPersonalCard(t,e){this.date=t.date.slice(0,10),this.title=t.title,this.text=t.text,this.source=t.source,this.image=t.image,this.url=t.url,this.keyword=t.keyword,this.id=t.id,this.cardContainer=e,this.cardTemplate=`\n              <div class="card added${this.id}">\n                <div class="card__figure" style="background-image: url(${this.image})">\n                <div class="card__keyword">${this.keyword}</div>\n                  <div class="card__offer-text">Убрать из сохраненных</div>\n                  <button class="card__action card__action_delete"></button>\n                </div>\n                <div class="card__container">\n                  <div class="card__date">${this.date}</div>\n                  <h3 class="card__title">${this.title}</h3>\n                  <div class="card__text">\n                      ${this.text}\n                  </div>\n                  <div class="card__source">${this.source}</div>\n                </div>\n              </div>`,this.cardContainer.insertAdjacentHTML("beforeend",this.cardTemplate);const n="."+this.cardContainer.lastChild.classList[1],r=document.querySelector(n),i=r.querySelector(".card__action");r.addEventListener("click",this._openArticlePersonal.bind(r,this.url)),i.addEventListener("click",this._togglePersonal.bind(this,this.id,r))}_openArticlePersonal(t){console.log(t),event.preventDefault(),event.stopImmediatePropagation(),window.open(t)}_openArticle(t){event.preventDefault(),event.stopImmediatePropagation(),window.open(t)}_togglePersonal(t,e){event.preventDefault(),event.stopImmediatePropagation(),this.mainApi.removeArticle(t).then(()=>{e.remove()}).catch(t=>{alert(t)})}_toggleSaved(t,e,n,r,i,o,s,a){event.preventDefault(),event.stopImmediatePropagation(),t.classList.contains("card__action_save")?this.mainApi.createArticle(e,n,r,i,o,s,a).then(e=>{this.id=e,t.classList.remove("card__action_save"),t.classList.add("card__action_saved")}).catch(t=>{alert(t)}):this.mainApi.removeArticle(this.id).then(()=>{t.classList.remove("card__action_saved"),t.classList.add("card__action_save")}).catch(t=>{alert(t)})}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(t,e){this.cardContainer=t,this.newsCard=e}addCardSearch(t){return this.newsCard.createSearchCard(t,this.cardContainer)}addCardPersonal(t){return this.newsCard.createPersonalCard(t,this.cardContainer)}clear(){for(;this.cardContainer.firstChild;)this.cardContainer.removeChild(this.cardContainer.firstChild)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n(50);const r="https://api.x-217.ru",i={"Content-Type":"application/json"},o="Отсутствует соединение с сервером авторизации";class s{constructor(){}signup(t,e,n){const o={name:t,email:e,password:n};return fetch(r+"/signup",{method:"POST",headers:i,credentials:"include",withCredentials:!0,body:JSON.stringify(o)}).then(t=>t.json()).catch(t=>{alert(t)})}signin(t,e){return fetch(r+"/signin/",{method:"POST",headers:i,credentials:"include",withCredentials:!0,body:JSON.stringify({email:t,password:e})}).then(t=>t.json()).catch(t=>{throw new Error(o)})}getUserData(){return fetch(r+"/users/me",{method:"GET",headers:i,credentials:"include",withCredentials:!0}).then(t=>!!t.ok&&t.json()).catch(t=>{throw new Error(o)})}logout(){return fetch(r+"/users/logout",{method:"GET",headers:i,credentials:"include",withCredentials:!0}).then(t=>{if(t.ok)return localStorage.setItem("user","false"),localStorage.setItem("logged","false"),!0}).catch(t=>{throw new Error(o)})}createArticle(t,e,n,s,a,c,u,l){return fetch(r+"/articles",{method:"POST",headers:i,credentials:"include",withCredentials:!0,body:JSON.stringify({keyword:t,title:e,text:n,date:s,source:a,link:c,image:u})}).then(t=>t.json()).then(t=>(console.log(t._id),t._id)).catch(t=>{throw new Error(o)})}getArticles(){return fetch(r+"/articles/",{method:"GET",headers:i,credentials:"include",withCredentials:!0}).then(t=>t.json()).catch(t=>{throw new Error(o)})}removeArticle(t){return fetch(`${r}/articles/${t}`,{method:"DELETE",headers:i,credentials:"include",withCredentials:!0}).then(t=>t.json()).catch(t=>{throw new Error(o)})}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(){this.header=document.querySelector(".header"),this.container=document.querySelector(".header__container"),this.authButton=document.querySelector(".header__auth-button"),this.itemSaved=document.querySelector(".header__item_saved"),this.itemSavedLink=document.querySelector(".header__saved-link")}render(t){this._setSavedPagesLinkText("Сохраненные статьи"),t?(this._displayHeaderLogged(),this._displayAuthButtonLogged(),this._showUserName(t),this._showSavedPagesTab(),this._showSavedPagesLink()):(this._displayHeaderUnLogged(),this._showAuthButtonDefaultText(),this._displayAuthButtonUnLogged(),this._hideSavedPagesTab(),this._hideSavedPagesLink())}_displayHeaderLogged(){this.container.classList.add("header__container_logged")}_displayAuthButtonLogged(){this.authButton.classList.add("header__auth-button_logged")}_showUserName(t){this.authButton.textContent=t}_showSavedPagesTab(){this.itemSaved.classList.remove("header__item_hidden")}_showSavedPagesLink(){this.itemSavedLink.classList.add("header__saved-link_active")}_setSavedPagesLinkText(t){this.itemSavedLink.textContent=t}_displayHeaderUnLogged(){this.container.classList.remove("header__container_logged")}_displayAuthButtonUnLogged(){this.authButton.classList.remove("header__auth-button_logged")}_showAuthButtonDefaultText(){this.authButton.textContent="Авторизоваться"}_hideSavedPagesTab(){this.itemSaved.classList.add("header__item_hidden")}_hideSavedPagesLink(){this.itemSavedLink.classList.remove("header__saved-link_active")}}},function(t,e,n){var r=n(0),i=n(48),o=n(55),s=n(7);for(var a in i){var c=r[a],u=c&&c.prototype;if(u&&u.forEach!==o)try{s(u,"forEach",o)}catch(t){u.forEach=o}}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var r=n(26);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r,i,o,s,a=n(34),c=n(17),u=n(0),l=n(10),h=n(70),d=n(12),f=n(71),p=n(38),v=n(72),m=n(5),_=n(11),g=n(73),y=n(8),S=n(20),b=n(74),x=n(80),w=n(81),L=n(39).set,E=n(82),C=n(83),T=n(84),A=n(42),j=n(85),k=n(23),P=n(37),O=n(1),B=n(86),I=O("species"),q="Promise",M=k.get,F=k.set,D=k.getterFor(q),V=h,$=u.TypeError,U=u.document,N=u.process,R=l("fetch"),G=A.f,H=G,z="process"==y(N),J=!!(U&&U.createEvent&&u.dispatchEvent),K=P(q,(function(){if(!(S(V)!==String(V))){if(66===B)return!0;if(!z&&"function"!=typeof PromiseRejectionEvent)return!0}if(c&&!V.prototype.finally)return!0;if(B>=51&&/native code/.test(V))return!1;var t=V.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[I]=e,!(t.then((function(){}))instanceof e)})),W=K||!x((function(t){V.all(t).catch((function(){}))})),Y=function(t){var e;return!(!m(t)||"function"!=typeof(e=t.then))&&e},Q=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;E((function(){for(var i=e.value,o=1==e.state,s=0;r.length>s;){var a,c,u,l=r[s++],h=o?l.ok:l.fail,d=l.resolve,f=l.reject,p=l.domain;try{h?(o||(2===e.rejection&&et(t,e),e.rejection=1),!0===h?a=i:(p&&p.enter(),a=h(i),p&&(p.exit(),u=!0)),a===l.promise?f($("Promise-chain cycle")):(c=Y(a))?c.call(a,d,f):d(a)):f(i)}catch(t){p&&!u&&p.exit(),f(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&Z(t,e)}))}},X=function(t,e,n){var r,i;J?((r=U.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},(i=u["on"+t])?i(r):"unhandledrejection"===t&&T("Unhandled promise rejection",n)},Z=function(t,e){L.call(u,(function(){var n,r=e.value;if(tt(e)&&(n=j((function(){z?N.emit("unhandledRejection",r,t):X("unhandledrejection",t,r)})),e.rejection=z||tt(e)?2:1,n.error))throw n.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t,e){L.call(u,(function(){z?N.emit("rejectionHandled",t):X("rejectionhandled",t,e.value)}))},nt=function(t,e,n,r){return function(i){t(e,n,i,r)}},rt=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Q(t,e,!0))},it=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw $("Promise can't be resolved itself");var i=Y(n);i?E((function(){var r={done:!1};try{i.call(n,nt(it,t,r,e),nt(rt,t,r,e))}catch(n){rt(t,r,n,e)}})):(e.value=n,e.state=1,Q(t,e,!1))}catch(n){rt(t,{done:!1},n,e)}}};K&&(V=function(t){g(this,V,q),_(t),r.call(this);var e=M(this);try{t(nt(it,this,e),nt(rt,this,e))}catch(t){rt(this,e,t)}},(r=function(t){F(this,{type:q,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(V.prototype,{then:function(t,e){var n=D(this),r=G(w(this,V));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=z?N.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Q(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=M(t);this.promise=t,this.resolve=nt(it,t,e),this.reject=nt(rt,t,e)},A.f=G=function(t){return t===V||t===o?new i(t):H(t)},c||"function"!=typeof h||(s=h.prototype.then,d(h.prototype,"then",(function(t,e){var n=this;return new V((function(t,e){s.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof R&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return C(V,R.apply(u,arguments))}}))),a({global:!0,wrap:!0,forced:K},{Promise:V}),p(V,q,!1,!0),v(q),o=l(q),a({target:q,stat:!0,forced:K},{reject:function(t){var e=G(this);return e.reject.call(void 0,t),e.promise}}),a({target:q,stat:!0,forced:c||K},{resolve:function(t){return C(c&&this===o?V:this,t)}}),a({target:q,stat:!0,forced:W},{all:function(t){var e=this,n=G(e),r=n.resolve,i=n.reject,o=j((function(){var n=_(e.resolve),o=[],s=0,a=1;b(t,(function(t){var c=s++,u=!1;o.push(void 0),a++,n.call(e,t).then((function(t){u||(u=!0,o[c]=t,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=G(e),r=n.reject,i=j((function(){var i=_(e.resolve);b(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(t,e,n){var r=n(2),i=n(64),o=n(19),s=n(9);t.exports=function(t,e){for(var n=i(e),a=s.f,c=o.f,u=0;u<n.length;u++){var l=n[u];r(t,l)||a(t,l,c(e,l))}}},function(t,e,n){var r=n(2),i=n(13),o=n(67).indexOf,s=n(24);t.exports=function(t,e){var n,a=i(t),c=0,u=[];for(n in a)!r(s,n)&&r(a,n)&&u.push(n);for(;e.length>c;)r(a,n=e[c++])&&(~o(u,n)||u.push(n));return u}},function(t,e,n){var r=n(10);t.exports=r("document","documentElement")},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(56).forEach,i=n(60),o=n(61),s=i("forEach"),a=o("forEach");t.exports=s&&a?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){var r=n(15),i=n(25),o=n(49),s=n(16),a=n(57),c=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,l=4==t,h=6==t,d=5==t||h;return function(f,p,v,m){for(var _,g,y=o(f),S=i(y),b=r(p,v,3),x=s(S.length),w=0,L=m||a,E=e?L(f,x):n?L(f,0):void 0;x>w;w++)if((d||w in S)&&(g=b(_=S[w],w,y),t))if(e)E[w]=g;else if(g)switch(t){case 3:return!0;case 5:return _;case 6:return w;case 2:c.call(E,_)}else if(l)return!1;return h?-1:u||l?l:E}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},function(t,e,n){var r=n(5),i=n(58),o=n(1)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var r=n(8);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(33);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){var r=n(6),i=n(3),o=n(2),s=Object.defineProperty,a={},c=function(t){throw t};t.exports=function(t,e){if(o(a,t))return a[t];e||(e={});var n=[][t],u=!!o(e,"ACCESSORS")&&e.ACCESSORS,l=o(e,0)?e[0]:c,h=o(e,1)?e[1]:void 0;return a[t]=!!n&&!i((function(){if(u&&!r)return!0;var t={length:-1};u?s(t,1,{enumerable:!0,get:c}):t[1]=1,n.call(t,l,h)}))}},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(0),i=n(20),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},function(t,e,n){var r=n(10),i=n(66),o=n(69),s=n(4);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(0);t.exports=r},function(t,e,n){var r=n(52),i=n(36).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(13),i=n(16),o=n(68),s=function(t){return function(e,n,s){var a,c=r(e),u=i(c.length),l=o(s,u);if(t&&n!=n){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},function(t,e,n){var r=n(27),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(0);t.exports=r.Promise},function(t,e,n){var r=n(12);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){"use strict";var r=n(10),i=n(9),o=n(1),s=n(6),a=o("species");t.exports=function(t){var e=r(t),n=i.f;s&&e&&!e[a]&&n(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){var r=n(4),i=n(75),o=n(16),s=n(15),a=n(76),c=n(79),u=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,n,l,h){var d,f,p,v,m,_,g,y=s(e,n,l?2:1);if(h)d=t;else{if("function"!=typeof(f=a(t)))throw TypeError("Target is not iterable");if(i(f)){for(p=0,v=o(t.length);v>p;p++)if((m=l?y(r(g=t[p])[0],g[1]):y(t[p]))&&m instanceof u)return m;return new u(!1)}d=f.call(t)}for(_=d.next;!(g=_.call(d)).done;)if("object"==typeof(m=c(d,y,g.value,l))&&m&&m instanceof u)return m;return new u(!1)}).stop=function(t){return new u(!0,t)}},function(t,e,n){var r=n(1),i=n(14),o=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},function(t,e,n){var r=n(77),i=n(14),o=n(1)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(78),i=n(8),o=n(1)("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var r={};r[n(1)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){var r=n(4);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(1)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){var r=n(4),i=n(11),o=n(1)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||null==(n=r(s)[o])?e:i(n)}},function(t,e,n){var r,i,o,s,a,c,u,l,h=n(0),d=n(19).f,f=n(8),p=n(39).set,v=n(40),m=h.MutationObserver||h.WebKitMutationObserver,_=h.process,g=h.Promise,y="process"==f(_),S=d(h,"queueMicrotask"),b=S&&S.value;b||(r=function(){var t,e;for(y&&(t=_.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?s():o=void 0,t}}o=void 0,t&&t.enter()},y?s=function(){_.nextTick(r)}:m&&!v?(a=!0,c=document.createTextNode(""),new m(r).observe(c,{characterData:!0}),s=function(){c.data=a=!a}):g&&g.resolve?(u=g.resolve(void 0),l=u.then,s=function(){l.call(u,r)}):s=function(){p.call(h,r)}),t.exports=b||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,s()),o=e}},function(t,e,n){var r=n(4),i=n(5),o=n(42);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){var r,i,o=n(0),s=n(41),a=o.process,c=a&&a.versions,u=c&&c.v8;u?i=(r=u.split("."))[0]+r[1]:s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},,,,function(t,e,n){},function(t,e,n){"use strict";var r=n(34),i=n(6),o=n(0),s=n(2),a=n(5),c=n(9).f,u=n(51),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new l(t):void 0===t?l():l(t);return""===t&&(h[e]=!0),e};u(d,l);var f=d.prototype=l.prototype;f.constructor=d;var p=f.toString,v="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=p.call(t);if(s(h,t))return"";var n=v?e.slice(7,-1):e.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},function(t,e,n){"use strict";var r=n(12),i=n(4),o=n(3),s=n(93),a=RegExp.prototype,c=a.toString,u=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),l="toString"!=c.name;(u||l)&&r(RegExp.prototype,"toString",(function(){var t=i(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in a)?s.call(t):n)}),{unsafe:!0})},function(t,e,n){"use strict";var r=n(4);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);n(47),n(90);var r=n(45),i=n(46);n(91),n(92);var o=n(43),s=n(44);n(50);function a(t){let e=t.getDate();e<10&&(e="0"+e);let n=t.getMonth()+1;n<10&&(n="0"+n);return`${t.getFullYear()}-${n}-${e}`}const c=document.querySelector(".results__output"),u=new r.a,l=new class{constructor(){}getNews(t){const e=new Date;e.setDate(e.getDate()-7);const n=a(e),r=a(new Date);return fetch(`https://praktikum.tk/news/v2/everything?q=${t}&from=${n}&to=${r}&sortBy=publishedAt&apiKey=1f5a8f3e9c5e415995cf77e91cc9a093&pageSize=100`).then(t=>t.json()).then(t=>t).catch(t=>{alert(t)})}},h=new i.a,d=new class{constructor(){this.container=document.querySelector(".popup"),this.closeButton=document.querySelector(".popup__close"),this.close=this.close.bind(this)}open(){this.container.classList.add("popup_is-visible"),this.closeButton.addEventListener("click",this.close,{once:!0})}close(){this.container.classList.remove("popup_is-visible")}},f=new class{constructor(){}setEventListeners(t){t.form.addEventListener("input",()=>this.setSubmitButtonState.call(this,t))}_validateInputElement(){return this.validity.valueMissing?(this.nextElementSibling.textContent="Это обязательное поле",!1):this.validity.tooShort&&this.classList.contains("form__input_password")?(this.nextElementSibling.textContent="Длина пароля должна быть не менее 8 символов",!1):this.validity.tooShort&&this.classList.contains("form__input_username")?(this.nextElementSibling.textContent="Должно быть от 2 до 30 символов",!1):!this.validity.valid&&this.classList.contains("form__input_email")?(this.nextElementSibling.textContent="Неправильный формат email",!1):(this.nextElementSibling.textContent="",!0)}setSubmitButtonState(t){const e=this._validateInputElement.call(t.emailInput),n=this._validateInputElement.call(t.passwordInput),r=!t.name.classList.contains("form__item-is-visible")||this._validateInputElement.call(t.nameInput);e&&n&&r?(t.submitButton.removeAttribute("disabled"),t.submitButton.classList.add("form__button_activate")):(t.submitButton.setAttribute("disabled",""),t.submitButton.classList.remove("form__button_activate"))}},p=new class{constructor(t,e,n,r){this.mainApi=t,this.header=n,this.popup=e,this.formValidator=r,this.form=document.querySelector(".form"),this.title=document.querySelector(".form__title"),this.email=document.querySelector(".form__item_email"),this.emailTitle=document.querySelector(".form__item-name_email"),this.emailInput=document.querySelector(".form__input_email"),this.emailValidationMessage=document.querySelector(".form__message_email-not-valid"),this.password=document.querySelector(".form__item_password"),this.passwordTitle=document.querySelector(".form__item-name_password"),this.passwordInput=document.querySelector(".form__input_password"),this.passwordValidationMessage=document.querySelector(".form__message_password-not-valid"),this.name=document.querySelector(".form__item_username"),this.nameTitle=document.querySelector(".form__item-name_username"),this.nameInput=document.querySelector(".form__input_username"),this.nameValidationMessage=document.querySelector(".form__message_name-not-valid"),this.messageFromServer=document.querySelector(".form__message_from-server"),this.submitButton=document.querySelector(".form__button"),this.offer=document.querySelector(".form__offer"),this.offerText=document.querySelector(".form__offer-text"),this.offerButton=document.querySelector(".form__offer-button"),this._login=this._login.bind(this),this._signup=this._signup.bind(this),this._showSignUpForm=this._showSignUpForm.bind(this),this._showLoginForm=this._showLoginForm.bind(this)}_setInitialTextValues(){this.title.textContent="",this.emailTitle.textContent="Email",this.emailInput.placeholder="Введите почту",this.emailValidationMessage.textContent="",this.passwordTitle.textContent="Пароль",this.passwordInput.placeholder="Введите пароль",this.passwordValidationMessage.textContent="",this.nameTitle.textContent="Имя",this.nameInput.placeholder="Введите свое имя",this.nameValidationMessage.textContent="",this.messageFromServer.textContent="",this.submitButton.textContent="",this.offerText.textContent="",this.offerButton.textContent="",this._clear=this._clear.bind(this)}_setLoginEventListeners(){this.form.addEventListener("submit",this._login),this.offerButton.addEventListener("click",this._showSignUpForm)}_setSignUpEventListeners(){this.form.addEventListener("submit",this._signup),this.offerButton.addEventListener("click",this._showLoginForm)}_removeLoginEventListeners(){this.form.removeEventListener("submit",this._login),this.offerButton.removeEventListener("click",this._showSignUpForm)}_removeSignUpEventListeners(){this.form.removeEventListener("submit",this._signup),this.offerButton.removeEventListener("click",this._showLoginForm)}show(){this._setInitialTextValues(),this._clear(),this._showLoginForm(),this.popup.open()}_showLoginForm(){this._clear(),this._setInitialTextValues(),this._removeSignUpEventListeners(),this._setLoginEventListeners(),this.title.textContent="Вход",this.submitButton.textContent="Войти",this.offerText.textContent="или",this.offerButton.textContent="Зарегистрироваться",this.title.classList.remove("form__title_success"),this.offer.classList.remove("form__offer-success"),this.offerText.classList.remove("form__offer-text_success"),this.email.classList.add("form__item-is-visible"),this.password.classList.add("form__item-is-visible"),this.name.classList.remove("form__item-is-visible"),this.submitButton.removeAttribute("disabled"),this.submitButton.classList.remove("form__button_hide"),this.submitButton.classList.add("form__button_activate"),this.formValidator.setEventListeners(this),this.formValidator.setSubmitButtonState(this)}_showSignUpForm(){this._clear(),this._setInitialTextValues(),this._removeLoginEventListeners(),this.title.textContent="Регистрация",this.submitButton.textContent="Зарегистрироваться",this.offerText.textContent="или",this.offerButton.textContent="Войти",this.email.classList.add("form__item-is-visible"),this.password.classList.add("form__item-is-visible"),this.name.classList.add("form__item-is-visible"),this._setSignUpEventListeners(),this.submitButton.removeAttribute("disabled"),this.submitButton.classList.add("form__button_activate"),this.formValidator.setEventListeners(this),this.formValidator.setSubmitButtonState(this)}_showSuccessForm(){this._clear(),this.title.textContent="Пользователь успешно зарегистрирован",this.title.classList.add("form__title_success"),this.submitButton.textContent="Зарегистрироваться",this.offer.classList.add("form__offer-success"),this.offerText.classList.add("form__offer-text_success"),this.offerText.textContent="",this.offerButton.textContent="Войти",this.email.classList.remove("form__item-is-visible"),this.password.classList.remove("form__item-is-visible"),this.name.classList.remove("form__item-is-visible"),this.submitButton.classList.add("form__button_hide")}_login(t){t.preventDefault(),t.stopImmediatePropagation();const e=this.emailInput.value,n=this.passwordInput.value;this.mainApi.signin(e,n).then(t=>{t._id?this.mainApi.getUserData().then(t=>{t?(localStorage.setItem("logged","true"),localStorage.setItem("user",t.name),this.header.render(t.name),this._close(),window.location.reload()):this._setServerError(!1)}).catch(t=>{this._setServerError(!1)}):t.message?this._setServerError(t.message):this._setServerError("Неверная почта или пароль")}).catch(t=>{this._setServerError(!1)})}_signup(t){t.preventDefault(),t.stopImmediatePropagation();const e=this.emailInput.value,n=this.passwordInput.value,r=this.nameInput.value;this.mainApi.signup(r,e,n).then(t=>{t._id?this._showSuccessForm():t.message?this._setServerError(t.message):this._setServerError("Некорректные регистрационные данные")}).catch(t=>{this._setServerError(!1)})}_setServerError(t){this.messageFromServer.textContent=t||"Ошибка сервера, попробуйте ещё раз"}_clear(){this.emailInput.value="",this.passwordInput.value="",this.nameInput.value="",this.messageFromServer.textContent=""}_close(){this.popup.close()}}(u,d,h,f),v=new o.a(u),m=new s.a(c,v),_=new class{constructor(t,e){this.newsApi=t,this.preloader=document.querySelector(".results__preloader"),this.notFound=document.querySelector(".results__notfound"),this.resultsTitle=document.querySelector(".results__title"),this.resultsOutput=document.querySelector(".results__output"),this.resultsButton=document.querySelector(".results__button"),this.resultsContainer=document.querySelector(".results__container"),this.searchInput=document.querySelector(".search__input"),this.searchSubmitButton=document.querySelector(".search__submit"),this.total=0,this.articles=[],this.lastArticle=0,this.newsCardList=e,this._showArticles=this._showArticles.bind(this)}startSearch(t){this.newsCardList.clear(),this.total=0,this.articles=[],this.lastArticle=0,this._setEventListeners(),this.notFound.classList.remove("results__notfound_is-visible"),this.resultsTitle.classList.remove("results__title_is-visible"),this.resultsOutput.classList.remove("results__output_is-visible"),this.resultsButton.classList.remove("results__button_is-visible"),this.searchInput.setAttribute("disabled",!0),this.searchSubmitButton.setAttribute("disabled",!0),this.preloader.classList.add("results__preloader_is-visible"),this.newsApi.getNews(t).then(e=>{this.total=e.totalResults,this.articles=e.articles,this.articles.forEach(e=>{e.keyword=t}),this.articles.forEach(t=>{t.id=""}),this.searchInput.removeAttribute("disabled"),this.searchSubmitButton.removeAttribute("disabled"),this.preloader.classList.remove("results__preloader_is-visible"),this.total||this.notFound.classList.add("results__notfound_is-visible"),this.total&&(this.resultsTitle.classList.add("results__title_is-visible"),this.resultsOutput.classList.add("results__output_is-visible"),this.resultsButton.classList.add("results__button_is-visible"),this.resultsContainer.classList.remove("results__container_is-empty"),this._showArticles())}).catch(t=>{alert(t)})}_showArticles(){for(let t=this.lastArticle;t<this.lastArticle+3;t++)t<this.total&&this.newsCardList.addCardSearch({keyword:this.articles[t].keyword.toString()||"*",date:this.articles[t].publishedAt.slice(0,10)||Date.now(),title:this.articles[t].title.toString()||"*",text:this.articles[t].description.slice(0,128)||"*",source:this.articles[t].source.name.toString()||"*",image:this.articles[t].urlToImage||"https://demiart.ru/forum/uploads5/post-19981-1262760428.png",url:this.articles[t].url.toString()||"https://ya.ru/",id:t}),t===this.total-1&&this.resultsButton.classList.remove("results__button_is-visible");this.lastArticle=this.lastArticle+3}_setEventListeners(){this.resultsButton.addEventListener("click",this._showArticles)}}(l,m),g=document.querySelectorAll(".header__menu-item"),y=document.querySelector(".header__menu-button"),S=document.querySelector(".header__auth-button"),b=document.querySelector(".header__menu-button"),x=document.querySelector(".search__submit"),w=document.querySelector(".search__input");function L(t){S.classList.contains("header__auth-button_logged")?u.logout().then(t=>{t&&location.reload()}).catch(t=>{alert(t.message)}):p.show()}function E(){g.forEach(t=>t.classList.toggle("header__mobile-menu")),document.querySelector(".header").classList.toggle("header__blur"),y.classList.toggle("header__menu-button_close")}function C(t){!w.validity.patternMismatch&&w.value&&(t.preventDefault(),t.stopImmediatePropagation(),_.startSearch(w.value))}u.getUserData().then(t=>{h.render(t.name),S.addEventListener("click",L),b.addEventListener("click",E),x.addEventListener("click",C)}).catch(t=>{h.render(!1),alert(t.message)}),w.setCustomValidity("Некорректный запрос")}]);